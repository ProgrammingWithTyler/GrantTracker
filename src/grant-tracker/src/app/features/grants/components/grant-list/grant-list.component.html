<div class="grant-list-container" *ngIf="state$ | async as state">
  <div class="header">
    <div class="header-content">
      <div class="header-text">
        <h1>Grant Management</h1>
        <p class="subtitle">Track and manage educational grants</p>
      </div>
      <div class="header-actions">
        <button mat-raised-button color="primary" (click)="onCreateNew()">
          <mat-icon>add</mat-icon>
          New Grant
        </button>
      </div>
    </div>
  </div>

  <!-- Loading -->
  <div *ngIf="state.isLoading" class="loading-container">
    <div class="grants-grid">
      <mat-card *ngFor="let skeleton of [1,2,3]" class="grant-card skeleton-card">
        <!-- Skeleton template -->
      </mat-card>
    </div>
  </div>

  <!-- Error -->
  <div *ngIf="!state.isLoading && state.errorMessage" class="error-container">
    <mat-card class="error-card">
      <mat-card-content>
        <mat-icon class="error-icon">error_outline</mat-icon>
        <h3>Oops! Something went wrong</h3>
        <p>{{ state.errorMessage }}</p>
        <button mat-raised-button color="primary" (click)="onRetryLoad()">
          <mat-icon>refresh</mat-icon>
          Try Again
        </button>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Empty -->
  <div *ngIf="!state.isLoading && !state.errorMessage && state.grants.length === 0" class="empty-container">
    <mat-card class="empty-card">
      <mat-card-content>
        <mat-icon class="empty-icon">assignment</mat-icon>
        <h3>No grants available</h3>
        <p>There are currently no grants to display. Check back later or create your first grant.</p>
        <div class="empty-actions">
          <button mat-raised-button color="primary" (click)="onCreateNew()">
            <mat-icon>add</mat-icon>
            Create New Grant
          </button>
          <button mat-button (click)="onRetryLoad()">
            <mat-icon>refresh</mat-icon>
            Refresh
          </button>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- List -->
  <div class="grants-grid" *ngIf="!state.isLoading && !state.errorMessage && state.grants.length > 0">
    <mat-card *ngFor="let grant of state.grants; trackBy: trackByGrantId"
              class="grant-card clickable-card"
              (click)="onViewDetails(grant)">
      <mat-card-header>
        <mat-card-title>{{ grant.title }}</mat-card-title>
        <mat-card-subtitle>{{ grant.fundingSource }}</mat-card-subtitle>
      </mat-card-header>

      <mat-card-content>
        <div class="grant-details">
          <div class="amount">
            <mat-icon>attach_money</mat-icon>
            <span class="amount-value">{{ grant.amount | currency }}</span>
          </div>
          <div class="dates">
            <div class="date-item">
              <mat-icon>calendar_today</mat-icon>
              <span>Submitted: {{ grant.submissionDate | date:'MMM d, y' }}</span>
            </div>
            <div class="date-item">
              <mat-icon>event</mat-icon>
              <span>Due: {{ grant.dueDate | date:'MMM d, y' }}</span>
            </div>
          </div>
          <div class="contact">
            <mat-icon>email</mat-icon>
            <span>{{ grant.contactEmail }}</span>
          </div>
        </div>
      </mat-card-content>

      <mat-card-actions>
        <mat-chip [class]="'status-' + grant.status.toLowerCase()" class="status-chip">
          {{ grant.status }}
        </mat-chip>
        <div class="spacer"></div>
        <button mat-button
                color="primary"
                (click)="onViewDetails(grant); $event.stopPropagation()">
          <mat-icon>visibility</mat-icon>
          View Details
        </button>
      </mat-card-actions>
    </mat-card>
  </div>
</div>
