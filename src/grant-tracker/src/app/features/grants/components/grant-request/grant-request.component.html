<form [formGroup]="form" (ngSubmit)="onSubmit()" class="grant-form" novalidate>

  <!-- Simple Header -->
  <div class="form-header">
    <h1>Grant Request Submission</h1>
    <p class="subtitle">Please provide information about your grant request</p>
  </div>

  <!-- Basic Information -->
  <h3 class="section-title">
    <mat-icon>info</mat-icon>
    Basic Information
  </h3>

  <mat-form-field appearance="outline" class="full-width">
    <mat-label>Grant Title</mat-label>
    <input matInput
           formControlName="title"
           placeholder="Enter grant title"
           required />
    <mat-hint>6-100 characters</mat-hint>
    <mat-error *ngIf="getFieldError('title') as err">{{ err }}</mat-error>
  </mat-form-field>

  <mat-form-field appearance="outline" class="full-width">
    <mat-label>Justification</mat-label>
    <textarea matInput
              formControlName="justification"
              placeholder="Explain why you need this grant..."
              required
              rows="5"></textarea>
    <mat-hint>20-1000 characters</mat-hint>
    <mat-error *ngIf="getFieldError('justification') as err">{{ err }}</mat-error>
  </mat-form-field>

  <!-- Financial Details -->
  <h3 class="section-title">
    <mat-icon>attach_money</mat-icon>
    Financial Details
  </h3>

  <div class="form-row">
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Amount Requested</mat-label>
      <input matInput
             type="number"
             formControlName="amountRequested"
             placeholder="0"
             required />
      <span matPrefix>$ </span>
      <mat-hint>$100 - $1,000,000</mat-hint>
      <mat-error *ngIf="getFieldError('amountRequested') as err">{{ err }}</mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Grant Type</mat-label>
      <mat-select formControlName="grantType">
        <mat-option [value]="''">Select type (optional)</mat-option>
        <mat-option *ngFor="let type of grantTypes" [value]="type.value">
          {{ type.label }}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </div>

  <!-- Timeline -->
  <h3 class="section-title">
    <mat-icon>schedule</mat-icon>
    Timeline
  </h3>

  <mat-form-field appearance="outline" class="full-width">
    <mat-label>Submission Date</mat-label>
    <input matInput
           [matDatepicker]="picker"
           formControlName="submissionDate"
           required
           readonly />
    <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
    <mat-datepicker #picker></mat-datepicker>
    <mat-error *ngIf="getFieldError('submissionDate') as err">{{ err }}</mat-error>
  </mat-form-field>

  <!-- Actions -->
  <div class="submit-section">
    <button type="button"
            mat-button
            color="warn"
            (click)="resetForm()"
            [disabled]="isSubmitting">
      Reset
    </button>

    <button type="submit"
            mat-raised-button
            color="primary"
            [disabled]="form.invalid || isSubmitting">
      <div class="loading-content" *ngIf="isSubmitting">
        <mat-spinner diameter="20"></mat-spinner>
        <span>Submitting...</span>
      </div>
      <span *ngIf="!isSubmitting">Submit Request</span>
    </button>
  </div>

</form>

<gt-error-zone
  [errorMessage]="submitError"
  [autoDismiss]="false"
  [showRetry]="true"
  (retry)="handleRetry()"
  (dismiss)="handleDismiss()"/>
